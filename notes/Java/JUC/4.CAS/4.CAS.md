
[toc]

 

## 1. 是什么
要理解CAS，我们首先得了解乐观锁和悲观锁的概念。

### 1.1. 乐观锁与悲观锁

悲观锁：假设每次操作数据的时候总有人一起操作数据。因此我操作数据前先上锁，直到我操作完释放锁，别人都只能阻塞等待。
乐观锁：假设每次操作数据的时候没人跟我一起操作数据。因此我只在更新的时候检查一下有没有其他人修改了数据，有则重试直到成功。

### 1.2. CAS
CAS是乐观锁的一种。Java中的AQS、AtomicXXX都是基于CAS实现的。
CAS全称叫compare and set，即比较并设置某个变量的值，他是原子操作。
我们以CAS(A,B)为例，这里涉及了三个值，一个实际内存值A1，当前读取的值A（或者叫预期值A），及其修改值B。当且仅当A1== A时，把值修改为B

## 2. 如何使用
JUC包中Atomic类的实现都是通过CAS实现的，参考[Atomic.md](Atomic/Atomic.md)

